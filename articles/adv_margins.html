<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>tmap advanced: margins and aspect ratio • tmap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="tmap advanced: margins and aspect ratio">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tmap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-basics" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Basics</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-basics">
<li><a class="dropdown-item" href="../articles/basics_vv">Visual variables</a></li>
    <li><a class="dropdown-item" href="../articles/basics_scales">Scales</a></li>
    <li><a class="dropdown-item" href="../articles/basics_modes">Modes</a></li>
    <li><a class="dropdown-item" href="../articles/basics_facets">Facets</a></li>
    <li><a class="dropdown-item" href="../articles/basics_legends">Legends</a></li>
    <li><a class="dropdown-item" href="../articles/basics_basemaps">Basemaps (updated!)</a></li>
    <li><a class="dropdown-item" href="../articles/basics_components">Components</a></li>
    <li><a class="dropdown-item" href="../articles/basics_charts">Charts</a></li>
    <li><a class="dropdown-item" href="../articles/basics_layout">Layout</a></li>
    <li><a class="dropdown-item" href="../articles/basics_exporting">Exporting</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-foundations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Foundations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-foundations">
<li><a class="dropdown-item" href="../articles/foundations_gg">Grammar of Graphics</a></li>
    <li><a class="dropdown-item" href="../articles/foundations_crs">Map projections (CRS)</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/examples_choro_World">Choropleth (World)</a></li>
    <li><a class="dropdown-item" href="../articles/examples_choro_NLD">Choropleth (Netherlands)</a></li>
    <li><a class="dropdown-item" href="../articles/examples_bubble">Bubble map</a></li>
    <li><a class="dropdown-item" href="../articles/examples_raster">Raster map</a></li>
    <li><a class="dropdown-item" href="../articles/examples_topo_Africa">Topographic map (Africa)</a></li>
    <li><a class="dropdown-item" href="../articles/examples_terrain">Terrain map</a></li>
    <li><a class="dropdown-item" href="../articles/examples_gridmaps">Gridmap</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-comparison" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Comparison</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-comparison">
<li><a class="dropdown-item" href="../articles/versus_ggplot2">tmap vs ggplot2</a></li>
    <li><a class="dropdown-item" href="../articles/versus_mapview">tmap vs mapview</a></li>
    <li><a class="dropdown-item" href="../articles/versus_mapsf">tmap vs mapsf</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-extensions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Extensions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-extensions">
<li><a class="dropdown-item" href="../articles/ext_mapgl">tmap.mapgl</a></li>
    <li><a class="dropdown-item" href="../articles/ext_cartogram">tmap.cartogram</a></li>
    <li><a class="dropdown-item" href="../articles/ext_glyphs">tmap.glyphs</a></li>
    <li><a class="dropdown-item" href="../articles/ext_networks">tmap.networks</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-advanced" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Advanced</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-advanced">
<li><a class="dropdown-item" href="../articles/adv_shiny">Shiny integration</a></li>
    <li><a class="dropdown-item" href="../articles/adv_groups">Layer groups (view mode only)</a></li>
    <li><a class="dropdown-item" href="../articles/adv_multivariate">Multivariate visual variables</a></li>
    <li><a class="dropdown-item" href="../articles/adv_positions">Positioning of components (updated!)</a></li>
    <li><a class="dropdown-item" href="../articles/adv_comp_group">Grouping of components (new!)</a></li>
    <li><a class="dropdown-item" href="../articles/adv_options">Options and styles</a></li>
    <li><a class="dropdown-item" href="../articles/adv_margins">Margins and aspect ratio</a></li>
    <li><a class="dropdown-item" href="../articles/adv_extensions">Extending tmap</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-tmap/tmap/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>tmap advanced: margins and aspect ratio</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-tmap/tmap/blob/master/vignettes/adv_margins.Rmd" class="external-link"><code>vignettes/adv_margins.Rmd</code></a></small>
      <div class="d-none name"><code>adv_margins.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="design-mode">Design mode<a class="anchor" aria-label="anchor" href="#design-mode"></a>
</h2>
<p>tmap offers a special <strong>design mode</strong>, which can be enabled via <code>tmap_design_mode</code>. Bolow the same map, but the second time with this design mode enabled:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">tm</span> <span class="op">=</span> <span class="fu"><a href="../reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">NLD_muni</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"employment_rate"</span>, </span>
<span>    fill.legend <span class="op">=</span> <span class="fu"><a href="../reference/tm_legend.html">tm_legend</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="../reference/tm_pos.html">tm_pos_in</a></span><span class="op">(</span><span class="st">"left"</span>, <span class="st">"top"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu"><a href="../reference/tm_compass.html">tm_compass</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="../reference/tm_pos.html">tm_pos_in</a></span><span class="op">(</span><span class="st">"right"</span>, <span class="st">"bottom"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu"><a href="../reference/tm_scalebar.html">tm_scalebar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="../reference/tm_pos.html">tm_pos_in</a></span><span class="op">(</span><span class="st">"left"</span>, <span class="st">"bottom"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/tmap_design_mode.html">tmap_design_mode</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; design.mode: ON</span></span>
<span></span>
<span><span class="va">tm</span></span>
<span><span class="co">#&gt; ----------------W (in)--H (in)--asp---</span></span>
<span><span class="co">#&gt; | device        7.290 8.000 0.911 |</span></span>
<span><span class="co">#&gt; | plot area     6.502 7.680 0.847 |</span></span>
<span><span class="co">#&gt; | facets area   6.502 7.680 0.847 |</span></span>
<span><span class="co">#&gt; | map area      6.502 7.680 0.847 |</span></span>
<span><span class="co">#&gt; -----------------------------------</span></span></code></pre></div>
<p><img src="adv_margins_files/figure-html/figures-side-1.png" width="47%"><img src="adv_margins_files/figure-html/figures-side-2.png" width="47%"></p>
</div>
<div class="section level2">
<h2 id="tm_layout-and-tmap-options">tm_layout() and tmap options<a class="anchor" aria-label="anchor" href="#tm_layout-and-tmap-options"></a>
</h2>
<p>All options related to the layout of the map, such as background color and margins, can be set via <code>tm_layout</code>.</p>
<p>These options are a subset of all tmap options, which can be set via <code>tmap_options</code> (a stand-alone function) or <code>tm_options</code>, which is supposed to be stacked with the <code>+</code> operator.</p>
</div>
<div class="section level2">
<h2 id="inner-and-outer-margins">Inner and outer margins<a class="anchor" aria-label="anchor" href="#inner-and-outer-margins"></a>
</h2>
<p>Inner and outer margins can be set with the options <code>inner.margins</code> and <code>outer.margins</code>.</p>
<p>The inner margins are the margins between the shape (i.e. spatial geometries) and the map frame. In the design mode, the shape area with the inner margins is shown with a yellow rectangle.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">NLD_muni</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"employment_rate"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_layout.html">tm_layout</a></span><span class="op">(</span></span>
<span>        inner.margins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; ----------------W (in)--H (in)--asp---</span></span>
<span><span class="co">#&gt; | device        7.290 5.000 1.458 |</span></span>
<span><span class="co">#&gt; | plot area     5.171 4.800 1.077 |</span></span>
<span><span class="co">#&gt; | facets area   4.139 4.800 0.862 |</span></span>
<span><span class="co">#&gt; | map area      4.064 4.800 0.847 |</span></span>
<span><span class="co">#&gt; -----------------------------------</span></span></code></pre></div>
<p><img src="adv_margins_files/figure-html/unnamed-chunk-3-1.png" width="100%"></p>
<p>The outer margins are the margins between the map frame and the device frame.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">NLD_muni</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"employment_rate"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_layout.html">tm_layout</a></span><span class="op">(</span></span>
<span>        outer.margins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; ----------------W (in)--H (in)--asp---</span></span>
<span><span class="co">#&gt; | device        7.290 5.000 1.458 |</span></span>
<span><span class="co">#&gt; | plot area     3.648 3.000 1.216 |</span></span>
<span><span class="co">#&gt; | facets area   2.615 3.000 0.872 |</span></span>
<span><span class="co">#&gt; | map area      2.540 3.000 0.847 |</span></span>
<span><span class="co">#&gt; -----------------------------------</span></span></code></pre></div>
<p><img src="adv_margins_files/figure-html/unnamed-chunk-4-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="aspect-ratio">Aspect ratio<a class="anchor" aria-label="anchor" href="#aspect-ratio"></a>
</h2>
<p>The aspect of the map frame can be set via the option <code>asp</code>. If so, the inner margins will be adjusted automatically.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">NLD_muni</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"employment_rate"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_title.html">tm_title</a></span><span class="op">(</span><span class="st">"Square map"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_layout.html">tm_layout</a></span><span class="op">(</span>asp <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; ----------------W (in)--H (in)--asp---</span></span>
<span><span class="co">#&gt; | device        7.29 5.00 1.46 |</span></span>
<span><span class="co">#&gt; | plot area     5.53 4.80 1.15 |</span></span>
<span><span class="co">#&gt; | facets area   4.50 4.50 1.00 |</span></span>
<span><span class="co">#&gt; | map area      4.43 4.43 1.00 |</span></span>
<span><span class="co">#&gt; --------------------------------</span></span></code></pre></div>
<p><img src="adv_margins_files/figure-html/unnamed-chunk-5-1.png" width="100%"></p>
<p>The special value 0 means that the aspect ratio is adjusted to meet the space that is left on the device after substracting the outer margins and space occupied by the outside components (in this case just the legends).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">NLD_muni</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"employment_rate"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_layout.html">tm_layout</a></span><span class="op">(</span>outer.margins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>              asp <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; ----------------W (in)--H (in)--asp---</span></span>
<span><span class="co">#&gt; | device        7.29 5.00 1.46 |</span></span>
<span><span class="co">#&gt; | plot area     4.37 3.00 1.46 |</span></span>
<span><span class="co">#&gt; | facets area   3.34 3.00 1.11 |</span></span>
<span><span class="co">#&gt; | map area      3.27 3.00 1.09 |</span></span>
<span><span class="co">#&gt; --------------------------------</span></span></code></pre></div>
<p><img src="adv_margins_files/figure-html/unnamed-chunk-6-1.png" width="100%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martijn Tennekes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
