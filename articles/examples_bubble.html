<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>tmap example: bubble map • tmap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="tmap example: bubble map">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tmap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-basics" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Basics</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-basics">
<li><a class="dropdown-item" href="../articles/basics_vv">Visual variables</a></li>
    <li><a class="dropdown-item" href="../articles/basics_scales">Scales</a></li>
    <li><a class="dropdown-item" href="../articles/basics_modes">Modes</a></li>
    <li><a class="dropdown-item" href="../articles/basics_facets">Facets</a></li>
    <li><a class="dropdown-item" href="../articles/basics_legends">Legends</a></li>
    <li><a class="dropdown-item" href="../articles/basics_basemaps">Basemaps</a></li>
    <li><a class="dropdown-item" href="../articles/basics_components">Components</a></li>
    <li><a class="dropdown-item" href="../articles/basics_charts">Charts</a></li>
    <li><a class="dropdown-item" href="../articles/basics_layout">Layout</a></li>
    <li><a class="dropdown-item" href="../articles/basics_exporting">Exporting</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-foundations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Foundations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-foundations">
<li><a class="dropdown-item" href="../articles/foundations_gg">Grammar of Graphics</a></li>
    <li><a class="dropdown-item" href="../articles/foundations_crs">Map projections (CRS)</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/examples_choro_World">Choropleth (World)</a></li>
    <li><a class="dropdown-item" href="../articles/examples_choro_NLD">Choropleth (Netherlands)</a></li>
    <li><a class="dropdown-item" href="../articles/examples_bubble">Bubble map</a></li>
    <li><a class="dropdown-item" href="../articles/examples_raster">Raster map</a></li>
    <li><a class="dropdown-item" href="../articles/examples_topo_Africa">Topographic map (Africa)</a></li>
    <li><a class="dropdown-item" href="../articles/examples_terrain">Terrain map</a></li>
    <li><a class="dropdown-item" href="../articles/examples_gridmaps">Gridmap</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-comparison" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Comparison</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-comparison">
<li><a class="dropdown-item" href="../articles/versus_ggplot2">tmap vs ggplot2</a></li>
    <li><a class="dropdown-item" href="../articles/versus_mapview">tmap vs mapview</a></li>
    <li><a class="dropdown-item" href="../articles/versus_mapsf">tmap vs mapsf</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-advanced" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Advanced</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-advanced">
<li><a class="dropdown-item" href="../articles/adv_shiny">Shiny integration</a></li>
    <li><a class="dropdown-item" href="../articles/adv_groups">Layer groups (view mode only)</a></li>
    <li><a class="dropdown-item" href="../articles/adv_multivariate">Multivariate visual variables</a></li>
    <li><a class="dropdown-item" href="../articles/adv_positions">Positioning of components</a></li>
    <li><a class="dropdown-item" href="../articles/adv_options">Options and styles</a></li>
    <li><a class="dropdown-item" href="../articles/adv_margins">Margins and aspect ratio</a></li>
    <li><a class="dropdown-item" href="../articles/adv_extensions">Extending tmap</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-tmap/tmap/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>tmap example: bubble map</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-tmap/tmap/blob/master/vignettes/examples_bubble.Rmd" class="external-link"><code>vignettes/examples_bubble.Rmd</code></a></small>
      <div class="d-none name"><code>examples_bubble.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-tmap/tmap" class="external-link">tmap</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tmap_options.html">tmap_options</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="about-the-data">About the data<a class="anchor" aria-label="anchor" href="#about-the-data"></a>
</h2>
<p>In tmap, there are two example data sets of the Netherlands:</p>
<ul>
<li>one for districts, <code>NLD_dist</code> (3340 in total),</li>
<li>one for municipalities: <code>NLD_muni</code> (345 in total), and</li>
<li>one for provinces: <code>NLD_prov</code> (12 in total).</li>
</ul>
<p>The first two datasets contain demographic data of the Netherlands as of 2022. The third dataset only contains metadata (names and codes) and will only be used to plot province borders.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tmap_arrange.html">tmap_arrange</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/qtm.html">qtm</a></span><span class="op">(</span><span class="va">NLD_dist</span>, title <span class="op">=</span> <span class="st">"NLD_dist: 3340 districts"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/qtm.html">qtm</a></span><span class="op">(</span><span class="va">NLD_muni</span>, title <span class="op">=</span> <span class="st">"NLD_mini: 345 municipalities"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/qtm.html">qtm</a></span><span class="op">(</span><span class="va">NLD_prov</span>, title <span class="op">=</span> <span class="st">"NLD_prov: 12 provinces"</span><span class="op">)</span>,</span>
<span>    ncol <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="examples_bubble_files/figure-html/unnamed-chunk-3-1.png" width="100%"></p>
<p>The variables in the <code>NLD_dist</code> and <code>NLD_muni</code> are the same:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">NLD_dist</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "code"               "name"               "province"          </span></span>
<span><span class="co">#&gt;  [4] "area"               "urbanity"           "population"        </span></span>
<span><span class="co">#&gt;  [7] "pop_0_14"           "pop_15_24"          "pop_25_44"         </span></span>
<span><span class="co">#&gt; [10] "pop_45_64"          "pop_65plus"         "dwelling_total"    </span></span>
<span><span class="co">#&gt; [13] "dwelling_value"     "dwelling_ownership" "employment_rate"   </span></span>
<span><span class="co">#&gt; [16] "income_low"         "income_high"        "edu_appl_sci"      </span></span>
<span><span class="co">#&gt; [19] "geometry"</span></span></code></pre></div>
<p>We will create a choropleth about the variable <code>"edu_appl_sci"</code>, which contains the percentage of 15-75 year old people who have a university degree (Dutch: WO) or applied sciences degree (Dutch: HBO), per district as of 1st October 2022.</p>
</div>
<div class="section level2">
<h2 id="population-of-dutch-municipalities">Population of Dutch municipalities<a class="anchor" aria-label="anchor" href="#population-of-dutch-municipalities"></a>
</h2>
<p>The following code creates a bubble map of population per</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">NLD_muni</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey95"</span>, col <span class="op">=</span> <span class="st">"grey60"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/tm_symbols.html">tm_symbols</a></span><span class="op">(</span></span>
<span>    size <span class="op">=</span> <span class="st">"population"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"steelblue"</span>,</span>
<span>    col <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    lwd <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    size.scale <span class="op">=</span> <span class="fu"><a href="../reference/tm_scale.html">tm_scale</a></span><span class="op">(</span>values.scale <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="examples_bubble_files/figure-html/unnamed-chunk-5-1.png" width="100%"></p>
<p>Note the scale function <code><a href="../reference/tm_scale.html">tm_scale()</a></code> is general purpose. Because the data is categorical, it will forward its arguments to <code><a href="../reference/tm_scale_categorical.html">tm_scale_categorical()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="higher-income-class-in-dutch-districts">Higher income class in Dutch districts<a class="anchor" aria-label="anchor" href="#higher-income-class-in-dutch-districts"></a>
</h2>
<p>The following map shows the percentage of people with a higher income per Dutch district. This is encoded via a interval ‘rainbow’ color scale. Bubble sizes are proportional to the population size.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">NLD_dist</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/tm_symbols.html">tm_symbols</a></span><span class="op">(</span></span>
<span>    size <span class="op">=</span> <span class="st">"population"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"income_high"</span>,</span>
<span>    col <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    size.scale <span class="op">=</span> <span class="fu"><a href="../reference/tm_scale_continuous.html">tm_scale_continuous</a></span><span class="op">(</span>values.scale <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>    fill.scale <span class="op">=</span> <span class="fu"><a href="../reference/tm_scale_intervals.html">tm_scale_intervals</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span>, values <span class="op">=</span> <span class="st">"-tol.rainbow_wh_br"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="examples_bubble_files/figure-html/unnamed-chunk-6-1.png" width="100%"></p>
<p>In order to find a suitable color palette for this example, we used</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cols4all</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/cols4all/man/c4a_gui.html" class="external-link">c4a_gui</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>and selected a sequential ‘rainbow’ like color scale which is color blind friendly, and where the colors are not too bright and not too dark, because we would like to have sufficient contrast with both the black borders and the white background (see the <a href="https://mtennekes.github.io/cols4all/articles/01_paper.html" class="external-link">working paper of cols4all</a>). The <code>-</code> symbol indicates that we reverse the palette.</p>
<p>Note that we set <code>n</code> the number of class intervals to 5. However, for the standard interval method, which is called <code>pretty</code>, the parameter <code>n</code> is the preferred number of classes. In this case the resulting number of classes is 5 (just like <code>pretty(c(0,60), 5)</code>).</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martijn Tennekes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
