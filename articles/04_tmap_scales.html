<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>tmap: scales • tmap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="tmap: scales">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tmap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.99.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01_tmap_intro_v4.html">Introducing tmap 4</a></li>
    <li><a class="dropdown-item" href="../articles/02_tmap_diff_v3.html">tmap: diff(v4, v3)</a></li>
    <li><a class="dropdown-item" href="../articles/03_tmap_vv.html">tmap: visual variables</a></li>
    <li><a class="dropdown-item" href="../articles/04_tmap_scales.html">tmap: scales</a></li>
    <li><a class="dropdown-item" href="../articles/05_tmap_facets.html">tmap: facets</a></li>
    <li><a class="dropdown-item" href="../articles/06_tmap_legends.html">tmap: legends</a></li>
    <li><a class="dropdown-item" href="../articles/07_tmap_charts.html">tmap: charts</a></li>
    <li><a class="dropdown-item" href="../articles/08_tmap_basemaps.html">tmap: basemaps</a></li>
    <li><a class="dropdown-item" href="../articles/09_tmap_shiny.html">tmap: shiny integration</a></li>
    <li><a class="dropdown-item" href="../articles/10_tmap_export.html">tmap: exporting maps</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-tmap/tmap/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>tmap: scales</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-tmap/tmap/blob/master/vignettes/04_tmap_scales.Rmd" class="external-link"><code>vignettes/04_tmap_scales.Rmd</code></a></small>
      <div class="d-none name"><code>04_tmap_scales.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="scales">Scales<a class="anchor" aria-label="anchor" href="#scales"></a>
</h2>
<p>Each visual variable and each transformation variable can be scaled with one of the <code>tm_scale_</code> functions.
To illustrate the different options, we show life expectancy across Africa, which we round in order to use the categorical scales as well.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">World</span><span class="op">)</span></span>
<span><span class="va">Africa</span> <span class="op">=</span> <span class="va">World</span><span class="op">[</span><span class="va">World</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Africa"</span>, <span class="op">]</span></span>
<span><span class="va">Africa</span><span class="op">$</span><span class="va">life_exp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">Africa</span><span class="op">$</span><span class="va">life_exp</span><span class="op">)</span></span></code></pre></div>
<p>Like <strong>tmap 3.x</strong>, it is possible to create facets by specifying multiple data variable names and scales to one visual (or transformation) variable, in this case <code>"fill"</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">Africa</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"life_exp"</span>, <span class="fl">6</span><span class="op">)</span>, </span>
<span>                fill.scale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/tm_scale_categorical.html">tm_scale_categorical</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="../reference/tm_scale_categorical.html">tm_scale_ordinal</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                  <span class="fu"><a href="../reference/tm_scale_intervals.html">tm_scale_intervals</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="../reference/tm_scale_continuous.html">tm_scale_continuous</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                  <span class="fu"><a href="../reference/tm_scale_continuous.html">tm_scale_continuous_log</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="../reference/tm_scale_discrete.html">tm_scale_discrete</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                fill.legend <span class="op">=</span> <span class="fu"><a href="../reference/tm_legend.html">tm_legend</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">""</span>, position <span class="op">=</span> <span class="fu"><a href="../reference/tm_pos.html">tm_pos_in</a></span><span class="op">(</span><span class="st">"left"</span>, <span class="st">"top"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_layout.html">tm_layout</a></span><span class="op">(</span>panel.labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tm_scale_categorical"</span>, <span class="st">"tm_scale_ordinal"</span>,</span>
<span>                               <span class="st">"tm_scale_intervals"</span>, <span class="st">"tm_scale_continuous"</span>,</span>
<span>                               <span class="st">"tm_scale_continuous_log"</span>, <span class="st">"tm_scale_discrete"</span><span class="op">)</span>, </span>
<span>              inner.margins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>              legend.text.size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p><img src="04_tmap_scales_files/figure-html/unnamed-chunk-4-1.png"><!-- --></p>
<p>Both <code><a href="../reference/tm_scale_categorical.html">tm_scale_categorical()</a></code> and <code><a href="../reference/tm_scale_categorical.html">tm_scale_ordinal()</a></code> treat data as categorical, so ignoring the fact that they are actually numbers.
The only difference is that categorical does not assume any order between the categories, whereas ordinal does.
This is similar to factors in R which can be ordered or not.</p>
<p>The other shown scales can only be applied to numeric data.
Note that in this example the breaks of <code><a href="../reference/tm_scale_intervals.html">tm_scale_intervals()</a></code> are similar to the tick marks of <code>tm_scale_continous()</code>.
However, when using class intervals only a few colors are used (in this case six plus a color for missing values) whereas in a continuous scale a gradient of colors is used.
The advantage of using class intervals is that it is relatively easy to read data values from the map, e.g. the value of South Africa is 55 to 60, while the advantage of using a continuous color scale is that the colors in the map are more accurate (because they are unrounded).</p>
<p>For <code><a href="../reference/tm_scale_intervals.html">tm_scale_intervals()</a></code> it is possible to chose how to determine the breaks (with the argument <code>style</code>).
For <code>tm_scale_continous()</code> it is possible to use a transformation function: in this case the built-in log transformation is also shown (which is pretty useless for this particular example because of the data range).
Finally, <code><a href="../reference/tm_scale_discrete.html">tm_scale_discrete()</a></code> uses a discrete linear scale.
Note that this is different than <code><a href="../reference/tm_scale_categorical.html">tm_scale_ordinal()</a></code>, which does not use colors for values that are not present (as categories), for instance 53.</p>
<p>Each <code>tm_scale_*()</code> function can (in principle) be applied to any visual or transformation variable.
Note that this is different from <strong>ggplot2</strong> where scales are organized by variable and by type (e.g. <code><a href="https://ggplot2.tidyverse.org/reference/scale_colour_continuous.html" class="external-link">ggplot2::scale_fill_continuous()</a></code>).
This is related to another difference with <strong>ggplot2</strong>.
In <strong>tmap</strong>, the scales are set directly in the map layer function to the target visual/transformation variable, for instance, <code>tm_polygons(fill = "x", fill.scale = tm_scale_continuous())</code>.
In <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code>, scales are set outside the layer functions.</p>
<p>Each <code>tm_scale_</code> function has (at least) the following arguments: <code>values</code>, <code>values.repeat</code>, <code>values.range</code>, <code>values.scale</code>, <code>value.na</code>, <code>value.null</code>, <code>value.neutral</code>, <code>labels</code>, <code>label.na</code>, <code>label.null</code>, and <code>label.format</code>.
The <code>value*</code> arguments determine the visual values to which the data values are mapped.
In case the scale is applied to a visual variable that represents color, they take color values or a color palette.
However, if, for instance, the same scale is applied to line width, then values should be numeric values that represent line widths.</p>
<p>This is illustrated in the following example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">World</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"HPI"</span>, fill.scale <span class="op">=</span> <span class="fu"><a href="../reference/tm_scale_intervals.html">tm_scale_intervals</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"scico.roma"</span>, </span>
<span>                                                              value.na <span class="op">=</span> <span class="st">"grey95"</span>, </span>
<span>                                                              breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>,<span class="fl">20</span>,<span class="fl">30</span>,<span class="fl">45</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_symbols.html">tm_symbols</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"HPI"</span>, size.scale <span class="op">=</span> <span class="fu"><a href="../reference/tm_scale_intervals.html">tm_scale_intervals</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>,<span class="fl">0.5</span>, <span class="fl">0.8</span><span class="op">)</span>, </span>
<span>                                                             value.na <span class="op">=</span> <span class="fl">0.1</span>, </span>
<span>                                                             breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>,<span class="fl">20</span>,<span class="fl">30</span>,<span class="fl">45</span><span class="op">)</span><span class="op">)</span>, </span>
<span>               col <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span></span></code></pre></div>
<p><img src="04_tmap_scales_files/figure-html/unnamed-chunk-5-1.png"><!-- --></p>
<p>The defaults for those <code>value.*</code> arguments are stored in the <strong>tmap</strong> options. For instance</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tmap_options.html">tmap_options</a></span><span class="op">(</span><span class="st">"values.var"</span><span class="op">)</span><span class="op">$</span><span class="va">values.var</span><span class="op">$</span><span class="va">fill</span></span>
<span><span class="co">#&gt; $seq</span></span>
<span><span class="co">#&gt; [1] "-hcl.blues3"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $div</span></span>
<span><span class="co">#&gt; [1] "pu_gn_div"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $unord</span></span>
<span><span class="co">#&gt; [1] "cols4all.area7"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ord</span></span>
<span><span class="co">#&gt; [1] "-hcl.blues3"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $cyc</span></span>
<span><span class="co">#&gt; [1] "tol.rainbow_pu_rd"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $biv</span></span>
<span><span class="co">#&gt; [1] "pu_gn_bivs"</span></span></code></pre></div>
<p>contains the default color palettes for the visual variable <code>"fill"</code> for different types of data.
For instance, when data values are all positive numbers, and <code><a href="../reference/tm_scale_intervals.html">tm_scale_intervals()</a></code> or <code><a href="../reference/tm_scale_continuous.html">tm_scale_continuous()</a></code> is applied, the default color palette is <code>"-hcl.blues3"</code>, as can be seen in the examples above.</p>
<p>Regarding the available color palettes: <strong>tmap</strong> uses the new R package <strong>cols4all</strong> which contains a large number of well-known color palettes.
Please run <code><a href="https://mtennekes.github.io/cols4all/reference/c4a_gui.html" class="external-link">cols4all::c4a_gui()</a></code> which starts an interactive tool (the successor of <code><a href="https://rdrr.io/pkg/tmaptools/man/palette_explorer.html" class="external-link">tmaptools::palette_explorer()</a></code>).
Of course, also own color palettes can be loaded directly via a vector of color codes.</p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martijn Tennekes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
